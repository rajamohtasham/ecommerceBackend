{% extends 'store/base.html' %}
{% load static %}

{% block title %}All Products{% endblock %}

{% block content %}
<h2>All Products</h2>

<form method="get" action="{% url 'products' %}" class="search-form">
    <input type="text" name="q" placeholder="Search by name or category">
    <button type="submit">Search</button>
</form>

<div class="product-grid">
    {% for product in products %}
        <div class="product-card">
            <img src="{{ product.image.url }}" alt="{{ product.name }}">
            <h2>{{ product.name }}</h2>
            <p class="price">PKR {{ product.price }}</p>
            <a href="{% url 'product_detail' product.id %}" class="btn">View Details</a>
        </div>
    {% empty %}
        <p>No products found.</p>
    {% endfor %}
</div>

<!-- âœ… Pagination block (moved outside the loop) -->
<div class="pagination">
    <span class="step-links">
        {% if products.has_previous %}
            <a href="?page=1">&laquo; First</a>
            <a href="?page={{ products.previous_page_number }}">Previous</a>
        {% endif %}

        <span class="current">
            Page {{ products.number }} of {{ products.paginator.num_pages }}
        </span>

        {% if products.has_next %}
            <a href="?page={{ products.next_page_number }}">Next</a>
            <a href="?page={{ products.paginator.num_pages }}">Last &raquo;</a>
        {% endif %}
    </span>
</div>

{% endblock %}
